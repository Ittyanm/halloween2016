!function(s){"use strict";"function"==typeof define&&define.amd?define(["jquery"],s):"object"==typeof exports?module.exports=s(require("jquery")):s(jQuery)}(function(s){var t="flex-pulldown",e={init:function(i){return i=s.extend({showNum:!0,sp:!0,breakwidth:420},i),e.settings={state:!1,"class":{wrap:"flex-pulldown",menu:"flex-pulldown-menu",more:"flex-pulldown-more",list:"flex-menu-li",hideli:"menu-hidden",visible:"flex-pulldown-more-visible",addul:"flex-pulldown-add-menu"}},this.each(function(){var n=this,l=s(this);l.data(t);i=s.extend({},i),l.data(t,{options:i}),e.setup.call(n),e.flexevent.call(n),s(window).on("resize",function(){e.flexevent.call(n)})})},setup:function(){var i=this,n=s(this),l=n.data(t).options;n.addClass(e.settings["class"].wrap);var a=n.find("."+e.settings["class"].menu).find("> li");a.not("."+e.settings["class"].more).addClass(e.settings["class"].list);var d=n.find("."+e.settings["class"].list);e.listNum=d.length;var o=0;e.bp=[];for(var c=0;c<e.listNum;c++)o+=d.eq(c).outerWidth(!0),e.bp.push(o);e.more=n.find("."+e.settings["class"].more),e.toggle.call(i),l.showNum&&e.showNum.call(i);var u=n.find("."+e.settings["class"].more).height();s("."+e.settings["class"].addul).css({top:u})},flexevent:function(){var i=this,n=s(this),l=n.data(t).options,a=n.width(),d=0;n.children().each(function(s){d+=n.children().not("."+e.settings["class"].menu).eq(s).outerWidth(!0),s++});for(var o=a-d-10,c=0,u=0;u<e.listNum;u++)c+=n.find("."+e.settings["class"].list).not("."+e.settings["class"].hideli).eq(u).outerWidth(!0);n.find("."+e.settings["class"].more).hasClass(e.settings["class"].visible)&&(c+=n.find("."+e.settings["class"].more).outerWidth(!0));var r=s.grep(e.bp,function(s,t){return o>s}),f=n.find("."+e.settings["class"].list).not("."+e.settings["class"].hideli).length;e.addpulldown.call(i,r,o,c),e.removepulldown.call(i,f,o),n.find("."+e.settings["class"].hideli).get(0)&&n.find("."+e.settings["class"].more).addClass(e.settings["class"].visible),l.showNum&&e.countNum.call(i)},addpulldown:function(i,n,l){var a=s(this),d=a.data(t).options,o=s(window).width(),c=a.find("."+e.settings["class"].list),u=a.find("."+e.settings["class"].addul);d.sp&&o<=d.breakwidth?(c.prependTo("."+e.settings["class"].addul),u.find("> li").addClass(e.settings["class"].hideli),a.find("."+e.settings["class"].more).addClass(e.settings["class"].visible)):l>n&&(c.slice(i.length-1).prependTo(u),a.find("."+e.settings["class"].addul).find("> li").addClass(e.settings["class"].hideli))},removepulldown:function(i,n){var l=s(this),a=l.data(t).options,d=s(window).width(),o=l.find("."+e.settings["class"].more);(!a.sp||a.sp&&d>a.breakwidth)&&(n>=e.bp[i+1]&&e.listNum-2>i?l.find("."+e.settings["class"].addul).find("> li").first().removeClass(e.settings["class"].hideli).insertBefore(o):n>=e.bp[e.listNum-1]&&(l.find("."+e.settings["class"].addul).find("> li").removeClass(e.settings["class"].hideli).insertBefore(o),l.find("."+e.settings["class"].more).removeClass(e.settings["class"].visible)))},toggle:function(){var i=this,n=s(this);n.data(t).options;e.more.on("click",function(){n.find("."+e.settings["class"].addul).hasClass("show")?e.close.call(i):e.open.call(i),event.preventDefault()})},open:function(){var t=s(this);t.find("."+e.settings["class"].addul).addClass("show"),t.find("."+e.settings["class"].more).addClass("open")},close:function(){var t=s(this);t.find("."+e.settings["class"].addul).removeClass("show"),t.find("."+e.settings["class"].more).removeClass("open")},showNum:function(){var t=s(this);e.$MenuNum=s('<span class="menu-num"></span>'),t.find("."+e.settings["class"].more).append(e.$MenuNum),t.find(".menu-num").css({display:"none"})},countNum:function(){var t=s(this);t.find("."+e.settings["class"].hideli).get(0)&&(t.find(".menu-num").css({display:"block"}),e.$MenuNum.text(t.find("."+e.settings["class"].hideli).length))}};s.fn.fxpulldown=function(t){return e[t]?e[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void s.error("Method "+t+" does not exist on jQuery.tooltip"):e.init.apply(this,arguments)}});